"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4225],{4225:(M,u,r)=>{r.r(u),r.d(u,{HomePageModule:()=>Z});var g=r(6895),l=r(4556),s=r(433),c=r(538),m=r(655),e=r(8256),d=r(2340),p=r(529);let f=(()=>{class o{constructor(n){this.http=n}authenticated(n){return this.http.post(d.N.login_url,n)}}return o.\u0275fac=function(n){return new(n||o)(e.LFG(p.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var h=r(5657);let v=(()=>{class o{constructor(n){this.toastController=n}ToastNoAccess(n,t){return(0,m.mG)(this,void 0,void 0,function*(){yield(yield this.toastController.create({message:n,duration:3e3,icon:t})).present()})}}return o.\u0275fac=function(n){return new(n||o)(e.LFG(l.yF))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function P(o,i){1&o&&(e.TgZ(0,"ion-note",12),e._uU(1,"Type a valid email"),e.qZA())}function y(o,i){1&o&&(e.TgZ(0,"ion-note",13),e._uU(1,"Invalid email"),e.qZA())}function S(o,i){1&o&&(e.TgZ(0,"ion-note",13),e._uU(1,"Require min 8 characteres"),e.qZA())}const T=[{path:"",component:(()=>{class o{constructor(n,t,a,C,U,H){this.fb=n,this.loginService=t,this.router=a,this.cookieService=C,this.toastController=U,this.toastService=H,this.formUser=this.fb.group({email:["",[s.kI.email,s.kI.required]],password:["",[s.kI.minLength(8)]],strategy:["local"]})}ngOnInit(){this.isAuthenticated()&&this.router.navigate(["dashboard"])}get email(){return this.formUser.get("email")}get password(){return this.formUser.get("password")}get strategy(){return this.formUser.get("strategy")}ToastNoAccess(n,t){return(0,m.mG)(this,void 0,void 0,function*(){yield(yield this.toastController.create({message:n,duration:3e3,icon:t})).present()})}login(){this.loginService.authenticated(this.formUser.value).subscribe(n=>{const{user:t,accessToken:a}=n;console.log(t),console.log(a),this.cookieService.set("token",a),this.cookieService.set("id",t._id),this.cookieService.set("name",t.fullname),this.cookieService.set("email",t.email),this.cookieService.set("telephone",t.telephone),console.log("logged"),this.router.navigate(["dashboard"])},n=>{const{error:t}=n;let a;console.log(t.name),null==t.name?(t.name="No internet connection",a="wifi"):(t.name="Email or password not correct",a="close-circle"),this.toastService.ToastNoAccess(t.name,a)})}isAuthenticated(){return!!this.cookieService.get("token")}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(s.qu),e.Y36(f),e.Y36(c.F0),e.Y36(h.N),e.Y36(l.yF),e.Y36(v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-home"]],decls:19,vars:7,consts:[[3,"fullscreen"],["id","container"],["id","login-container"],["src","../../assets/Logo.png","id","image","alt","Lends image"],[3,"formGroup","ngSubmit"],["position","floating"],["placeholder","Enter text","formControlName","email",1,"custom"],[3,"hidden"],["color","success",4,"ngIf"],["color","danger",4,"ngIf"],["type","password","placeholder","Enter text","formControlName","password",1,"custom"],["id","button-login",3,"disabled"],["color","success"],["color","danger"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"main",2),e._UZ(3,"ion-img",3),e.TgZ(4,"form",4),e.NdJ("ngSubmit",function(){return t.login()}),e.TgZ(5,"ion-item")(6,"ion-label",5),e._uU(7,"Email"),e.qZA(),e._UZ(8,"ion-input",6),e.TgZ(9,"div",7),e.YNc(10,P,2,0,"ion-note",8),e.YNc(11,y,2,0,"ion-note",9),e.qZA()(),e.TgZ(12,"ion-item")(13,"ion-label",5),e._uU(14,"Password"),e.qZA(),e._UZ(15,"ion-input",10),e.YNc(16,S,2,0,"ion-note",9),e.qZA(),e.TgZ(17,"button",11),e._uU(18,"Login"),e.qZA()()()()()),2&n&&(e.Q6J("fullscreen",!0),e.xp6(4),e.Q6J("formGroup",t.formUser),e.xp6(5),e.Q6J("hidden",t.email.valid||t.email.pristine),e.xp6(1),e.Q6J("ngIf",null==t.email||null==t.email.errors?null:t.email.errors.require),e.xp6(1),e.Q6J("ngIf",null==t.email||null==t.email.errors?null:t.email.errors.email),e.xp6(5),e.Q6J("ngIf",null==t.password||null==t.password.errors?null:t.password.errors.minLength),e.xp6(1),e.Q6J("disabled",t.formUser.invalid))},dependencies:[g.O5,s._Y,s.JJ,s.JL,s.sg,s.u,l.W2,l.Xz,l.pK,l.Ie,l.Q$,l.uN,l.j9],styles:["main[_ngcontent-%COMP%]{padding:30px 20px}#container[_ngcontent-%COMP%]{text-align:center;background-color:#fff;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#login-container[_ngcontent-%COMP%]{border:solid #F7F7F7 2px;border-radius:5px;width:90%;max-width:700px;margin:auto;box-shadow:5px 3px 3px rgba(253,143,255,.3)}#image[_ngcontent-%COMP%]{background-color:var(--ion-color-light-rgb)}#button-login[_ngcontent-%COMP%]{margin-top:30px;width:70%;height:30px;border-radius:4px;background-color:#3dc2ff;color:#fff;font-weight:900}ion-input.custom[_ngcontent-%COMP%]{--color: #000000;--placeholder-color: blue;--placeholder-opacity: .8}ion-item[_ngcontent-%COMP%]{margin-top:20px}ion-button[_ngcontent-%COMP%]{margin-top:30px}@media only screen and (min-width: 800px){.custom[_ngcontent-%COMP%]{width:70%}}"]}),o})()}];let b=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.Bz.forChild(T),c.Bz]}),o})(),Z=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.ez,s.u5,s.UX,l.Pc,b]}),o})()}}]);